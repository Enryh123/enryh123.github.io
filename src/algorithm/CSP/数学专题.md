#数论 #数学相关函数
#### 知识点自测
1. [ ] 是否会埃氏筛法和欧拉筛法
2. [ ] 埃氏和欧拉分别在 1s 内可以完成大概 10的几次方的数据规模，即筛选 1 至 10的几次方之内的质数可以保证时间在1s以内？哪种更快？$10^9$ 次方的数据规模欧拉筛可以做到不超时吗？
3. [ ] 整数a和b 最小公倍数如何求？ 即 lcm(a,b)= ?
4. [ ] T组数据的处理有什么注意事项？
5. [ ] 是否会用 `pow()`, `sqrt()`, `ceil()`, `floor()`, 四舍五入该如何进行，这几个函数的返回值类型是什么？
6. [ ] 是否会质因数分解？是否会计算约数个数？



















#### 思路

 $n_i = p_i \times q_i$、  $e_i \times d_i = (p_i - 1)(q_i - 1) + 1$。
`n, e, d` 是已知的，未知数只有 `p,q` 

暴力枚举：枚举`p`, `p` 的范围是 `1~n`, `q=n/p`
限制条件：上述两个等式
```cpp
typedef long long LL;
...
for(LL p=1; p<=n; p++){
	LL q = n/p;
	if(n==p*q && e*d==(p-1)*(q-1)+1){
		cout<<p<<' '<<q<<endl;
		break;
	}
}
```
> 加上 flag 控制输出 NO，可以拿到40分

##### 方法二：数学优化
$e_i \times d_i = (p_i - 1)(q_i - 1) + 1$
$e_i \times d_i = n-p_i-q_i+2$
$p_i+q_i=n-e_i \times d_i+2$
$p_i = n/q_i$  
$n/q_i+q_i=n-e_i \times d_i+2$
$n+{q_i}^2=(n-e_i \times d_i+2)*q_i$
${q_i}^2-(n-e_i \times d_i+2)*q_i+n=0$

问题变成了求解一元二次方程的解：$a=1$, $b=-(n-e_i*d_i+2)$, $c=n$
```cpp
...
cin>>n>>e>>d;
LL a = 1, b= -(n-e*d+2), c=n;
LL delta = b*b - 4*a*c;
LL p = (-1*b + sqrt(delat))/2*a;
LL q = n/p;
if(p+q==n-e*d+2 && p*q==n){
	cout<<p<<' '<<q<<endl;
}
else cout<<"NO"<<endl;
```
对一元二次方程 $ax ^ 2 + bx + c = 0, (a \neq 0)$，可以用以下方式求实数解：
计算 $\Delta = b ^ 2 - 4ac$，则:
若 $\Delta < 0$，则该一元二次方程无实数解。
否则 $\Delta \geq 0$，此时该一元二次方程有两个实数解 $x _ {1, 2} = \frac{-b \pm \sqrt \Delta}{2a}$。

例如：
- $x ^ 2 + x + 1 = 0$ 无实数解，因为 $\Delta = 1 ^ 2 - 4 \times 1 \times 1 = -3 < 0$。
- $x ^ 2 - 2x + 1 = 0$ 有两相等实数解 $x _ {1, 2} = 1$。
- $x ^ 2 - 3x + 2 = 0$ 有两互异实数解 $x _ 1 = 1, x _ 2 = 2$。

##### 二分查找
暴力搜索超时：枚举`p` 超时
用二分枚举 p， `p+q = n-e*d+2`, 题目又说 `p<=q` 的，所以 `p` 最大应该是 `(n-e*d+2)/2`
```cpp
LL l=1, r=(n-e*d+2)/2, mid;
while(l<r){ // 找右区间左边界
	mid = (l+r)/2;
	if(mid*(n-e*d+2-mid)>=n){
		r=mid;
	}else l=mid+1;
}
if(l*(n-e*d+2-l)==n) cout<<l<<' '<<n-e*d+2-l<<endl;
else cout<<"NO";
```



##### 思路
1. 如果是地铁，直接累加费用，并且新增一张优惠券（价格，时间，是否使用）
2. 如果是公交，枚举已有的优惠券，找没有用过且没有过期且面值大于票价的优惠券抵扣，否则累加公交车费用
3. 输出费用
数据结构：结构体
```cpp
const int MAXN = 1e5+10;
strcut T{
	int price, use, time;
} tickets[MAXN];
```

主程序
```cpp
int sum = 0;
for(int i=1; i<=n; i++){
	int t, price, time;
	cin>>t>>price>>time; 
	if(t==0){
		sum+=price;
		
	}
}
```